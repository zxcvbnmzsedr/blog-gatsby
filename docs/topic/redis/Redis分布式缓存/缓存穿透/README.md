---
title: 缓存穿透
date: 2022-04-28 14:17
permalink: /topic/redis/Redis%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F
topic: 
  - topic
tags: null
categories: 
  - topic
  - redis
  - Redis分布式缓存
  - 缓存穿透
---
# 缓存穿透

是值查询一个缓存和数据库中都没有的数据，由于大部分的缓存策略是被动加载的，并且处于容错考虑，如果从存储层查不到数据则不写入缓存。

这个不存在的数据每次都会到存储层去查询，失去缓存的意义，用户不断发起请求，量大甚至可以导致缓存雪崩。

# 接口校验

不要相信前端传来的东西，所以数据一定要在后端进行校验。

我们可以在接口层添加校验，不合法的直接返回即可，没必要做后续的操作。

# 空对象缓存或者缺省值

一般情况下OK。

**但是**黑客会对你的系统进行攻击，拿一个不存在的id 去查询数据，会产生大量的请求到数据库去查询。可能会导致你的数据库由于压力过大而宕掉。

+ **id相同:** 第一次打到DB，空对象缓存后第二次就返回null了，避免DB被攻击，不用再到数据库中去走一圈了
+ **id不同:** 由于存在空对象缓存和缓存回写，redis中的无关紧要的key也会越写越多

# 布隆过滤器

![image-20210918170608143](https://www.shiyitopo.tech/uPic/image-20210918170608143.png)
